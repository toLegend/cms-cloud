package com.cms.cmssetting.controller;import com.alibaba.fastjson.JSON;import com.cms.cmssetting.service.HelloService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.cloud.context.config.annotation.RefreshScope;import org.springframework.security.core.context.SecurityContextHolder;import org.springframework.security.core.userdetails.UserDetails;import org.springframework.web.bind.annotation.*;import java.security.Principal;import java.util.LinkedList;import java.util.List;/** * @author momf * @date 2018-10-17 */@RestController@RefreshScopepublic class HelloController {    @Autowired    private HelloService helloService;    @Value("${host}")    String host;    @GetMapping("/hello")    public String sayHello(String name){        return  helloService.sayHello(name)+host;    }    @GetMapping("oauth/me")    public Principal getUser(Principal user){        System.out.println(".. 进入　获取用户信息　方法   ..........  ");        System.out.println(JSON.toJSONString(user));        return user;    }    @GetMapping("api/user")    public Principal user(Principal user){        System.out.println(".. 进入　获取用户信息　方法   ..........  ");        System.out.println(JSON.toJSONString(user));        return user;    }    @GetMapping(path = "/api/messages")    public List<String> getMessages() {        List<String> list = new LinkedList<>();        list.add("俏如来");        list.add("帝如来");        list.add("鬼如来");        return list;    }    @PostMapping(path = "api/messages")    public String postMessage(Principal principal) {        return "POST -> 默苍离 ";    }    /**     * 当前登录人信息     * @return     */    @GetMapping(path = "api/loginUser")    public UserDetails currentlyLoginUser(){        UserDetails userDetails = (UserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal();        return  userDetails;    }}